#!/usr/bin/env bash
# Install and configure Nginx to serve "Holberton School for the win!" on port 80
# Install nginx and serve a page with "Holberton School"

apt-get update -y
apt-get install -y nginx

# Detect nginx web root
NGINX_ROOT=$(grep -R "root " /etc/nginx/sites-enabled/ | head -n1 | awk '{print $2}' | tr -d ';')
if [ -z "$NGINX_ROOT" ]; then
    NGINX_ROOT="/var/www/html"
fi

# Create web root if missing
mkdir -p $NGINX_ROOT

# Write the required page
echo "Holberton School" > $NGINX_ROOT/index.html

# Set correct permissions
chmod 644 $NGINX_ROOT/index.html
chown -R www-data:www-data $NGINX_ROOT

# Restart nginx
service nginx restart
